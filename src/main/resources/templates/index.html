<!DOCTYPE html>

<html lang="ko" xmlns:th="http://www.thymeleaf.org" class="layout-navbar-fixed layout-menu-fixed">

<head th:replace="~{layouts/base :: head(_, ~{::link})}">
    <link rel="stylesheet" th:href="@{/assets/css/dashboard.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/book.css}"/>
</head>

<body th:replace="~{layouts/base :: _body('dashboard', ~{::div}, ~{::script}, true)}">
<div class="container-xxl flex-grow-1 container-p-y">
    <div class="row">
        <!-- ÎèÖÏÑú ÌÉÄÏù¥Î®∏ -->
        <div class="col-lg-6 mb-4 order-1">
            <div class="card">
                <div class="row row-bordered g-0">
                    <div class="col-12">
                        <h5 class="card-header">ÎèÖÏÑú ÌÉÄÏù¥Î®∏</h5>
                        <div class="card-body">
                            <div id="readingTimerCont">
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card-header d-flex align-items-center justify-content-between">
                            <h5>ÏùΩÍ≥† ÏûàÎäî Ï±Ö <em class="fs-6 text-primary">2</em></h5>
                            <button class="btn btn-sm btn-outline-primary" data-bs-show="collapse"
                                    data-bs-target="#collapseExample">Ï±Ö Î≥ÄÍ≤Ω
                            </button>
                        </div>
                        <div class="card-body">
                            <ul id="readingBookList" class="tp-list selectable">
                                <li class="active">
                                    <div class="item-unit row">
                                        <div class="item-img">
                                            <span class="img-item">
                                                <img class="img-thumbnail" src="/assets/img/book01.jpg" alt="Î∞∞ÏõÄÏùò Î∞úÍ≤¨">
                                            </span>
                                        </div>
                                        <div class="item-info">
                                            <div class="info-name">
                                                <a href="/book/book-detail" class="bk-name btn-link">
                                                    Î∞∞ÏõÄÏùò Î∞úÍ≤¨ (ÎÇòÏùò ÌäπÎ≥ÑÌïú Í∞ÄÏ°±, ÍµêÏú°, Í∑∏Î¶¨Í≥† ÏûêÏú†Ïùò Ïù¥ÏïºÍ∏∞)
                                                </a>
                                            </div>
                                            <div class="info-detail mt-1">
                                                <p class="text-muted">2024. 05. 01 Î∂ÄÌÑ∞ ÏùΩÎäî Ï§ë</p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <div class="collapse" id="collapseExample">
                                    <li>
                                        <div class="item-unit row">
                                            <div class="item-img">
                                                <span class="img-item">
                                                    <a href="/book/book-detail">
                                                        <img class="img-thumbnail" src="/assets/img/book02.jpg"
                                                             alt="Ï¢ÖÏùò Í∏∞Ïõê">
                                                    </a>
                                                </span>
                                            </div>
                                            <div class="item-info">
                                                <div class="info-name">
                                                    <a href="/book/book-detail" class="bk-name btn-link">
                                                        Ï¢ÖÏùò Í∏∞Ïõê
                                                    </a>
                                                </div>
                                                <div class="info-detail mt-1">
                                                    <p class="text-muted">2024. 05. 01 Î∂ÄÌÑ∞ ÏùΩÎäî Ï§ë</p>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="item-unit row">
                                            <div class="item-img">
                                                <span class="img-item">
                                                    <a href="/book/book-detail">
                                                        <img class="img-thumbnail" src="/assets/img/book03.jpg"
                                                             alt="ÏùºÎ•òÏùò Ï°∞Í±¥">
                                                    </a>
                                                </span>
                                            </div>
                                            <div class="item-info">
                                                <div class="info-name">
                                                    <a href="/book/book-detail" class="bk-name btn-link">
                                                        ÏùºÎ•òÏùò Ï°∞Í±¥
                                                    </a>
                                                </div>
                                                <div class="info-detail mt-1">
                                                    <p class="text-muted">2024. 05. 01 Î∂ÄÌÑ∞ ÏùΩÎäî Ï§ë</p>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÏùºÏùº ÎèÖÏÑú Î™©Ìëú -->
        <div class="col-lg-6 mb-4 order-2">
            <div class="card mb-4" id="readingGoalCont">
                <div class="row row-bordered g-0">
                    <div class="col-12">
                        <div class="d-flex align-items-start row">
                            <div class="col-sm-7">
                                <div class="card-body">
                                    <h5 class="card-title text-primary">Ï∂ïÌïòÌï¥Ïöî ÌôçÍ∏∏ÎèôÎãò! üéâ</h5>
                                    <p class="">
                                        Ïò§ÎäòÏùò ÎèÖÏÑú Î™©ÌëúÎ•º <span class="fw-medium">72%</span> Ïù¥ÏÉÅ Îã¨ÏÑ±ÌïòÏÖ®Ïñ¥Ïöî!<br/>
                                        <!--                                                ÏÉàÎ°ú ÌöçÎìùÌïú Î±ÉÏßÄÎ•º ÌôïÏù∏Ìï¥ Î≥¥ÏÑ∏Ïöî!-->
                                    </p>
                                    <!--                                            <a href="javascript:void(0);" class="btn btn-sm btn-outline-primary">Î≥¥Îü¨Í∞ÄÍ∏∞</a>-->
                                </div>
                            </div>
                            <div class="d-none d-sm-block col-sm-5 text-center text-sm-left align-self-end">
                                <div class="card-body ps-0 pb-0">
                                    <img alt="View Badge User"
                                         class="img-fluid max-w-px-240"
                                         th:src="@{/assets/img/illustrations/reading-book-people.png}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card-header d-flex align-items-center justify-content-between">
                            <h5>ÏùºÏùº Î™©Ìëú Îã¨ÏÑ±</h5>
                            <div class="dropdown">
                                <button aria-expanded="false" aria-haspopup="true" class="btn p-0"
                                        data-bs-toggle="dropdown" id="dailyGoalEdit" type="button">
                                    <i class="bx bx-dots-vertical-rounded"></i>
                                </button>
                                <div aria-labelledby="dailyGoalEdit" class="dropdown-menu dropdown-menu-end">
                                    <a class="dropdown-item" data-bs-target="#smallModal" data-bs-toggle="modal"
                                       href="javascript:void(0);">ÏùºÏùº Î™©Ìëú ÏÑ§Ï†ï</a>
                                    <a class="dropdown-item text-danger" href="javascript:void(0);">Ï¥àÍ∏∞Ìôî</a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="week-stats-inline mb-4">
                                <a class="btn"></a>
                                <a class="btn"></a>
                                <a class="btn"></a>
                                <a class="btn"></a>
                                <a class="btn"></a>
                                <a class="btn"></a>
                                <a class="btn"></a>
                                <!-- TODO: ÏöîÏùº ÌÅ¥Î¶≠ÌïòÎ©¥ ÏïÑÎûò Î∞î Î∞îÎÄåÍ≤å -->
                            </div>
                            <div class="d-flex align-items-center gap-3">
                                <div class="progress col">
                                    <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="75"
                                         class="progress-bar"
                                         role="progressbar" style="width: 75%">
                                        80%
                                    </div>
                                </div>
                                <div class="text-end">
                                    <span>80/100Î∂Ñ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- ÏõîÍ∞Ñ ÎèÖÏÑú Î™©Ìëú -->
                <div class="col-sm-6 mb-4 mb-sm-0">
                    <div class="card">
                        <div class="card-header d-flex align-items-center justify-content-between">
                            <h5>ÏõîÍ∞Ñ Î™©Ìëú Îã¨ÏÑ±</h5>
                            <div class="dropdown">
                                <button aria-expanded="false" aria-haspopup="true" class="btn p-0"
                                        data-bs-toggle="dropdown" id="monthlyGoalEdit" type="button">
                                    <i class="bx bx-dots-vertical-rounded"></i>
                                </button>
                                <div aria-labelledby="monthlyGoalEdit" class="dropdown-menu dropdown-menu-end">
                                    <a class="dropdown-item" data-bs-target="#smallModal" data-bs-toggle="modal"
                                       href="javascript:void(0);">ÏõîÍ∞Ñ Î™©Ìëú ÏÑ§Ï†ï</a>
                                    <a class="dropdown-item text-danger" href="javascript:void(0);">Ï¥àÍ∏∞Ìôî</a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between mb-2">
                                <span class="fw-medium">5Ïõî</span>
                                <div class="text-end">
                                    <h3 class="card-title mb-1">2<span class="fs-4 ms-1">/ 8 Í∂å</span></h3>
                                    <small class="text-success fw-medium">
                                        <i class="bx bx-chevron-up"></i>(Ï†ÑÏõî ÎåÄÎπÑ) +2
                                    </small>
                                </div>
                            </div>
                            <div class="progress col">
                                <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="25"
                                     class="progress-bar" role="progressbar" style="width: 25%">
                                    25%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ïó∞Í∞Ñ ÎèÖÏÑú Î™©Ìëú -->
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-header d-flex align-items-center justify-content-between">
                            <h5>Ïó∞Í∞Ñ Î™©Ìëú Îã¨ÏÑ±</h5>
                            <div class="dropdown">
                                <button aria-expanded="false" aria-haspopup="true" class="btn p-0"
                                        data-bs-toggle="dropdown" id="yearlyGoalEdit" type="button">
                                    <i class="bx bx-dots-vertical-rounded"></i>
                                </button>
                                <div aria-labelledby="yearlyGoalEdit" class="dropdown-menu dropdown-menu-end">
                                    <a class="dropdown-item" data-bs-target="#smallModal" data-bs-toggle="modal"
                                       href="javascript:void(0);">Ïó∞Í∞Ñ Î™©Ìëú ÏÑ§Ï†ï</a>
                                    <a class="dropdown-item text-danger" href="javascript:void(0);">Ï¥àÍ∏∞Ìôî</a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between mb-2">
                                <span class="fw-medium">2024ÎÖÑ</span>
                                <div class="text-end">
                                    <h3 class="card-title mb-1">36<span class="fs-4 ms-1">/ 100 Í∂å</span></h3>
                                    <small class="text-danger fw-medium">
                                        <i class="bx bx-chevron-down"></i>(Ï†ÑÎÖÑ ÎåÄÎπÑ) -3
                                    </small>
                                </div>
                            </div>
                            <div class="progress col">
                                <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="36" class="progress-bar"
                                     role="progressbar" style="width: 36%">
                                    36%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Î≤†Ïä§Ìä∏ÏÖÄÎü¨ -->
    <div class="col-12 mb-4 order-0">
        <div class="card" id="bestSellerCont">
            <div class="card-header d-flex align-items-center justify-content-between py-3">
                <h5>Î≤†Ïä§Ìä∏ÏÖÄÎü¨</h5>
                <a class="btn btn-sm btn-outline-primary under-construction" href="javascript:void(0);">ÎçîÎ≥¥Í∏∞</a>
            </div>

            <div class="card-group">
                <div class="card">
                    <a th:href="@{/book/book-detail}">
                        <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book01.jpg}">
                        <div class="card-body">
                            <p class="card-title fw-medium">Î∞∞ÏõÄÏùò Î∞úÍ≤¨ (ÎÇòÏùò ÌäπÎ≥ÑÌïú Í∞ÄÏ°±, ÍµêÏú°, Í∑∏Î¶¨Í≥† ÏûêÏú†Ïùò Ïù¥ÏïºÍ∏∞)</p>
                            <p class="card-text">
                                <small class="text-muted">ÌÉÄÎùº Ïõ®Ïä§Ìä∏Ïò§Î≤Ñ</small>
                            </p>
                        </div>
                    </a>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book02.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book03.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book04.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book05.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book06.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book01.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
                <div class="card">
                    <img alt="Card image cap" class="card-img-top" th:src="@{/assets/img/book02.jpg}">
                    <div class="card-body">
                        <p class="card-title fw-medium">Ï¢ÖÏùò Í∏∞Ïõê</p>
                        <p class="card-text">
                            <small class="text-muted">Ï†ïÏú†Ï†ï</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/assets/js/reading-goal-stats.js}"></script>
<script>
    /**
     * (HTML ÎèôÏ†Å Î°úÎìú) ÎèÖÏÑú ÌÉÄÏù¥Î®∏
     */
    document.addEventListener('DOMContentLoaded', function () {
        const target = document.querySelector('#readingTimerCont');
        loadHTML('/common/reading-timer', target);
    });

    /**
     * ÎèÖÏÑú ÌÉÄÏù¥Î®∏ Ï±Ö ÏÑ†ÌÉù Ïù¥Î≤§Ìä∏
     */
    const bookListWrap = document.querySelector('#readingBookList');
    const bookListCollapse = document.querySelector('#readingBookList .collapse');
    const bookListElements = bookListWrap.querySelectorAll('li');
    bookListElements.forEach(el => {
        el.addEventListener('click', function (event) {
            // Í∏∞Ï°¥ active ÏóòÎ¶¨Î®ºÌä∏ ÎπÑÌôúÏÑ±Ìôî
            const actived = bookListWrap.querySelector('.active');
            if (actived) {
                actived.classList.remove('active');
                bookListCollapse.prepend(actived);
            }

            // ÌÅ¥Î¶≠Ìïú ÏóòÎ¶¨Î®ºÌä∏ ÌôúÏÑ±Ìôî
            el.classList.add('active');
            bookListWrap.prepend(el);

            bookListCollapse.classList.remove('show');
        });
    });

    /**
     * (HTML ÎèôÏ†Å Î°úÎìú) ÎèÖÏÑú Î™©Ìëú ÏÑ§Ï†ï Î™®Îã¨
     */
    const goalModalButtons = document.querySelectorAll('[data-bs-toggle=modal]');
    goalModalButtons.forEach(el => {
        el.addEventListener('click', function (event) {
            const target = document.querySelector('#smallModal .modal-content');
            loadHTML('/modal-daily-goal-edit', target);
        });
    });
</script>
</body>
</html>
